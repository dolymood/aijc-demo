!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DateTimePicker=e():t.DateTimePicker=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(11);i.Time=n(18),t.exports=i},function(t,e,n){var i=n(3),a=n(9),s=n(8),r=n(10);t.exports=i.extend({},i,a,s,r)},function(t,e,n){var i=n(1),a={on:function(t,e){this._eventData||(this._eventData={}),this._eventData[t]||(this._eventData[t]=[]);var n=!1;return i.each(this._eventData[t],function(t){if(t===e)return n=!0,!1}),n||this._eventData[t].push(e),this},once:function(t,e){var n=this,i=function(){e.apply(this,arguments),n.off(t,i)};return this.on(t,i),this},off:function(t,e){return this._eventData||(this._eventData={}),this._eventData[t]&&this._eventData[t].length?(e?i.each(this._eventData[t],function(n,i){if(n===e)return this._eventData[t].splice(i,1),!1}):this._eventData[t]=[],this):this},trigger:function(t){if(this._eventData||(this._eventData={}),!this._eventData[t])return this;var e=this._eventData[t].slice.call(arguments,1);return i.each(this._eventData[t],function(t){t.apply(null,e)}),this}};t.exports=a},function(t,e){function n(t,e){return v.toString.call(t)==="[object "+e+"]"}function i(t){return n(t,"Function")}function a(t){return n(t,"String")}function s(t){return n(t,"Number")}function r(t){return n(t,"Object")}function o(t){return Array.isArray?Array.isArray(t):n(t,"Array")}function c(t){return"undefined"==typeof t}function h(t){return n(t,"Date")}function u(t,e,n){if(t&&i(e))if(n=n||t,t.length){for(var a=0,s=t.length;a<s;a++)if(e.call(n,t[a],a,t)===!1)return}else if(r(t))for(var o in t)if(e.call(n,t[o],o,t)===!1)return}function l(){}function f(t){return!(!t||!r(t))&&"isPrototypeOf"in t}function p(){var t,e,n,a,s=arguments[0]||{},r=1,c=arguments.length,h=!1;for("boolean"==typeof arguments[0]&&(h=s,s=arguments[1]||{},r=2),"object"==typeof s||i(s)||(s={});r<c;r++)if(null!=(t=arguments[r]))for(e in t)if(n=s[e],a=t[e],s!==a)if(h&&a&&(f(a)||o(a))){var u=n&&(f(n)||o(n))?n:o(a)?[]:{};s[e]=p(h,u,a)}else void 0!==a&&(s[e]=a);return s}function d(t,e,n){if(e<1)return"";"undefined"==typeof n&&(n=!0),t=""+t;for(var i=0;i<e;)t="0"+t,i+=1;return i=t.length-e,t.substring(n?i:i>0?e:i)}function m(t,e){t.forEach(function(t){e[t]=null})}var v=Object.prototype;t.exports={isFn:i,isStr:a,isNum:s,isObj:r,isArray:o,isDate:h,isUndefined:c,each:u,noop:l,extend:p,pad:d,set2Null:m}},function(t,e,n){function i(t){this.options=s.extend({"default":new Date,type:"M"},t||{});var e=s.toDate(this.options["default"]);e||(e=new Date),this.updateNow(e)}function a(t){return{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),day:t.getDay(),hours:t.getHours(),minutes:t.getMinutes()}}var s=n(1),r=n(2),o={C:{value:"year",rows:function(t){for(var e=[],n=1900,i=2100,a=n;a<=i;)e.push([a++]);return e},input:"setFullYear"},Y:{value:"month",rows:function(t){for(var e=[],n=0,i=11,a=n;a<=i;)e.push([a++]);return e},input:"setMonth"},M:{value:"date",rows:function(t){for(var e=[],n=t.now,i=s.getDaysInMonthOfDate(n),a=0,r=1,o=s.getFirstDayOfMonth(t.now),c=null;r<=i;)a%7===0&&(c=[],e.push(c)),c.push(a<o?0:r++),a++;return e},input:"setDate"},W:{value:"date",rows:function(t){for(var e=[],n=t.parsedNow,i=s.getStartDateOfWeek(n.year,n.month,n.date),a=1,r=[];a++<=7;)r.push(i.getDate()),i=s.nextDate(i);return e.push(r),e},input:function(t,e){var n=e.now,i=e.parsedNow,a=s.toDate(n),r=i.date;return Math.abs(t-r)<7?a.setDate(t):t>r?(a.setDate(t),a=s.nextMonth(a)):(a.setDate(t),a=s.prevMonth(a)),a}},D:{value:"hours",rows:function(t){for(var e=[],n=0,i=23,a=n;a<=i;)e.push([a++]);return e},input:"setHours"},H:{value:"minutes",rows:function(t){for(var e=[],n=0,i=59,a=n;a<=i;)e.push([a++]);return e},input:"setMinutes"}};s.each(o,function(t){var e=t.input;s.isStr(e)&&(t.input=function(t,n){var i=n.now,a=s.toDate(i);return a[e](t),a})}),s.extend(i.prototype,{updateNow:function(t){this.now=new Date(t.getTime()),this.parsedNow=a(this.now)},_getConf:function(){return o[this.options.type]||o.M},getRows:function(){var t=this._getConf();return t.rows(this)},getInputValue:function(t){var e=this._getConf();return e.input(t,this)},getLevelValue:function(){var t=this._getConf();return this.parsedNow[t.value]},destroy:function(){this.now=null,this.parsedNow=null,this.options=null}},r),t.exports=i},function(t,e,n){function i(t,e){this.container=document.body,t||(t={}),this.lang=t.lang||"EN",this.lang=t.lang;var n=o[this.lang];n||(n=o.EN),this.config=a.extend(n,e||{}),this.formatValue=null,this.options=t,this.needDefFormat=!this.options.format,this.init(),this.options.format&&this.options["default"]&&a.isStr(this.options["default"])&&(this.options["default"]=a.parseDate(this.options["default"],this.options.format)),this._init()}var a=n(1),s=n(2),r=n(4),o=n(12),c="touchstart",h="touchmove",u="touchend",l="touchcancel",f=i.prototype;i.extend=function(t,e){var n=function(){};return n.prototype=f,t.prototype=new n,t.prototype["super"]=f,t.prototype.constructor=t,a.extend(t.prototype,e||{}),t},a.extend(f,{setDateTime:function(t){this.dateTime=new r(this.options),this._setDateTime(t),t?this.selfChange():(this.render(),this.afterRender())},setNow:function(t){this.options["default"]=t,this.setDateTime()},afterRender:a.noop,_setDateTime:a.noop,init:a.noop,_init:function(){this._initEle(),this.bindEvts(),this.setDateTime()},_initEle:function(){var t=a.createElement("div",{className:"picker-mask"}),e=a.createElement("div",{className:"picker-container"});this.rootEle=t,this.ele=e,this._initHead(),this._initContent(),this._initFoot(),this.initEle(),this._handleAni(),t.appendChild(e),this.container.appendChild(t)},initEle:a.noop,_initHead:function(){this.head=a.createElement("div",{className:"picker-head"}),this.ele.appendChild(this.head)},_initContent:function(){this.content=a.createElement("div",{className:"picker-content"},{"data-touchstart":"_start"}),this.ele.appendChild(this.content)},_initFoot:function(){this.foot=a.createElement("div",{className:"picker-foot",innerHTML:'<a href="javascript:;" class="picker-act picker-act-0" data-click="cancel">'+this.config.CANCEL+'</a><a href="javascript:;" class="picker-act picker-act-1" data-click="ok">'+this.config.OK+"</a>"}),this.ele.appendChild(this.foot)},_handleAni:function(){var t=this.rootEle,e=function(){t.classList.remove("time-picker-ani"),t.removeEventListener(a.prefixNames.aniEnd,e,!1)};t.classList.add("time-picker-ani"),t.addEventListener(a.prefixNames.aniEnd,e,!1)},_addEvt:function(t){this.rootEle.addEventListener(t,this,!1)},_removeEvt:function(t){this.rootEle.removeEventListener(t,this,!1)},desEvts:function(){this._removeEvt(c),this._removeEvt(h),this._removeEvt(u),this._removeEvt(l)},_stop:function(t){t.preventDefault(),t.stopPropagation()},bindEvts:function(){this._addEvt(c),this._addEvt(h),this._addEvt(u),this._addEvt(l)},changeTo:function(t,e){this.options["default"]=this.dateTime.getInputValue(t),this.setDateTime(e)},selV:function(t){var e=t.realTarget,n=e.getAttribute("data-val")-0;this.shouldSet(n)&&this.changeTo(n)},shouldSet:function(t){return!0},cancel:function(){this.trigger("canceled"),this.hide(),this.destroy()},ok:function(){var t=this.dateTime.now,e=this.options.format;e&&(t=a.formatDate(t,e)),this.trigger("selected",t,this.dateTime.now),this.hide(),this.destroy()},__touchstart:function(t){this.__start(t);var e=t.target,n=t.targetTouches[0];this.__s_x=n.pageX,this.__s_y=n.pageY,this.__startTime=t.timeStamp,this.__target=e},__touchmove:function(t){if(this.__move(t),this.__target){var e=t.changedTouches[0],n=10;(this.__target!==t.target||Math.abs(e.pageX-this.__s_x)>n||Math.abs(e.pageY-this.__s_y)>n)&&(this.__target=null)}},__touchend:function(t){if(this.__end(t),this.__target){var e=t.timeStamp;if(!(e-this.__lastTime<200||e-this.__startTime>700)){var n=this.__target;this.__lastTime=e,this.__target=null,t.__target=n,t.__type="click"}}},__touchcancel:function(t){this.__end(t),this.__target=null},handleEvent:function(t){this._stop(t);var e=t.type;this["__"+e](t),this._handleEvent(t)},_handleEvent:function(t){for(var e=t.__target||t.target,n="data-"+(t.__type||t.type),i="";e&&e!==this.rootEle&&!(i=e.getAttribute(n));)e=e.parentNode;i&&(t.realTarget=e,this.panel&&this.panel[i]?this.panel[i](t):this[i]&&this[i](t))},show:function(){this.ele&&(this.ele.style.display="block")},hide:function(){this.ele&&(this.ele.style.display="none")},destroy:function(){this.trigger("destroy"),this.hide(),this.desEvts(),this.container.removeChild(this.rootEle),this.dateTime.destroy(),this.panel&&this.panel.destroy(),a.set2Null(["container","rootEle","ele","head","content","foot","dateTime","panel","config","formatValue","lang"],this)}},s);var p=["selfChange","render","__start","__move","__end"];p.forEach(function(t){f[t]=function(){this.panel&&this.panel[t]&&this.panel[t].apply(this.panel,arguments)}}),t.exports=i},function(t,e,n){function i(t,e){var n,i={},a=e.indexOf("a")!==-1||e.indexOf("A")!==-1;return i.d=t.getDate(),i.dd=o(i.d,2),n=t.getDay(),i.D=n,i.DD=n,i.M=t.getMonth()+1,n=i.M,i.MM=o(n,2),i.yyyy=t.getFullYear(),n=i.yyyy,i.yyy=o(n,2)+"y",i.yy=o(n,2),i.y="y",i.H=t.getHours(),n=i.H,i.hh=o(a?s(n):n,2),i.h=a?s(n):n,i.HH=o(n,2),n=i.H<12,i.ap=n?"am":"pm",i.a=n?"am":"pm",i.AP=n?"AM":"PM",i.A=n?"AM":"PM",i.m=t.getMinutes(),i.mm=o(i.m,2),i.s=t.getSeconds(),i.ss=o(i.s,2),i.z=t.getMilliseconds(),n=i.z,i.zz=n+"z",i.zzz=o(n,3),e.replace(c,function(t,e){var n=i[e];return void 0===n?e:n})}function a(t,e){for(var n,i=h,a="",s=0,o=[""],c="",u=new Date(2e3,0,1);s<e.length;){for(c=e.charAt(s);s+1<e.length&&void 0!==i[c+e.charAt(s+1)];)c+=e.charAt(++s);void 0!==(n=i[c])?""!==n&&(a+=i[c],o.push(c)):a+=c,s++}a=new RegExp(a);var l=t.match(a),f=o.length;if(!l||l.length!==f)return null;for(s=0;s<f;s++)if(""!==(c=o[s]))switch(n=parseInt(l[s],10),c){case"yyyy":case"yyy":u.setYear(n);break;case"yy":u.setYear(2e3+n);break;case"MM":case"M":u.setMonth(n-1);break;case"dd":case"d":u.setDate(n);break;case"hh":case"h":case"HH":case"H":u.setHours(n);break;case"mm":case"m":u.setMinutes(n);break;case"ss":case"s":u.setSeconds(n);break;case"zzz":case"zz":case"z":u.setMilliseconds(n);break;case"AP":case"A":case"ap":case"a":u.setHours(r(u.getHours(),l[s]))}return u}function s(t){return t%12===0?12:t%12}function r(t,e){return e=e.toLowerCase(),t=parseInt(t,10),"pm"===e?t<12?t+12:t:12===t?0:t}var o=n(3).pad,c=/(?:\b|%)([dDMyHhaAmsz]+|ap|AP)(?:\b|%)/g,h={d:"([0-9][0-9]?)",dd:"([0-9][0-9])",M:"([0-9][0-9]?)",MM:"([0-9][0-9])",yyyy:"([0-9][0-9][0-9][0-9])",yyy:"([0-9][0-9])[y]",yy:"([0-9][0-9])",H:"([0-9][0-9]?)",hh:"([0-9][0-9])",h:"([0-9][0-9]?)",HH:"([0-9][0-9])",m:"([0-9][0-9]?)",mm:"([0-9][0-9])",s:"([0-9][0-9]?)",ss:"([0-9][0-9])",z:"([0-9][0-9]?[0-9]?)",zz:"([0-9][0-9]?[0-9]?)[z]",zzz:"([0-9][0-9][0-9])",ap:"([ap][m])",a:"([ap][m])",AP:"([AP][M])",A:"([AP][M])","%":""};t.exports={format:i,parse:a}},function(t,e,n){var i=n(4),a=n(2),s=n(1);t.exports={DateTime:i,events:a,utils:s}},function(t,e){var n={aniEnd:"animationend",transform:"transform"};!function(){for(var t,e=document.createElement("div"),i=e.style,a=["a","webkitA","MozA","OA","msA"],s=["animationend","webkitAnimationEnd","animationend","oAnimationEnd","MSAnimationEnd"],r=["transform","webkitTransform","MozTransform","OTransform","msTransform"],o=0,c=a.length;o<c;o++)t=a[o]+"nimation",t in i&&(n.aniEnd=s[o],n.transform=r[o])}(),n.transitionEnd=n.aniEnd.replace("AnimationEnd","TransitionEnd").replace("animationend","transitionend"),t.exports={prefixNames:n}},function(t,e,n){function i(t){return t instanceof Date?new Date(t.getTime()):(t=new Date(t),isNaN(t.getTime())?null:t)}function a(t,e){return t=i(t),t?v.format(t,e||y):""}function s(t,e){return v.parse(t,e||y)}function r(t,e){var n=[3,5,8,10];return~n.indexOf(e)?30:1===e?t%4===0&&t%100!==0||t%400===0?29:28:31}function o(t){return t.getDaysInMonth?t.getDaysInMonth():r(t.getFullYear(),t.getMonth())}function c(t){return t=new Date(t.getTime()),t.setDate(1),t.getDay()}function h(t,e){var n=new Date(t,e,1),i=n.getDay();return 0===i?n.setTime(n.getTime()-7*g):n.setTime(n.getTime()-g*i),n}function u(t,e,n){n=new Date(t,e,n);var i=n.getDay();return n.setTime(n.getTime()-g*i),n}function l(t){t=new Date(t.getTime()),t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/g-3+(e.getDay()+6)%7)/7)}function f(t){t=new Date(t.getTime());var e=t.getFullYear(),n=t.getMonth(),i=t.getDate(),a=0===n?e-1:e,s=0===n?11:n-1,o=r(a,s);return o<i&&t.setDate(o),t.setMonth(s),t.setFullYear(a),t}function p(t){t=new Date(t.getTime());var e=t.getFullYear(),n=t.getMonth(),i=t.getDate(),a=11===n?e+1:e,s=11===n?0:n+1,o=r(a,s);return o<i&&t.setDate(o),t.setMonth(s),t.setFullYear(a),t}function d(t){var e=t.getTime();return t=new Date(e),t.setTime(e-g),t}function m(t){var e=t.getTime();return t=new Date(e),t.setTime(e+g),t}var v=n(6),y="yyyy-MM-dd",g=864e5;t.exports={toDate:i,formatDate:a,parseDate:s,getDaysInMonth:r,getDaysInMonthOfDate:o,getFirstDayOfMonth:c,getStartDateOfMonth:h,getStartDateOfWeek:u,getWeekNumber:l,prevMonth:f,nextMonth:p,prevDate:d,nextDate:m}},function(t,e,n){function i(t,e,n){var i=s.createElement(t);return e&&a(e,function(t,e){i[e]=t}),n&&a(n,function(t,e){i.setAttribute(e,t)}),i}var a=n(3).each,s=document;t.exports={createElement:i}},function(t,e,n){n(13),t.exports={Core:n(7)}},function(t,e){t.exports={"zh-CN":{day:["周日","周一","周二","周三","周四","周五","周六"],shortDay:["日","一","二","三","四","五","六"],MDW:"M月d日D",YM:"yyyy年M月",OK:"确定",CANCEL:"取消"},EN:{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortDay:["S","M","T","W","T","F","S"],MDW:"D, MM-d",YM:"yyyy-M",OK:"OK",CANCEL:"CANCEL"}}},function(t,e){},,,function(t,e,n){function i(t){this.picker=t,this.main=null,this.mainStyle=null,this.headActiveEle=null,this.activeEle=null,this.pickerLineEle=null,this.type=t.options.type}function a(t,e,n){return e||(e=function(t,e,n){return'<i style="'+n(e,!0)+'">'+t+"</i>"}),n||(n=function(t){return t.length}),function(i,a){var s=a.length,r=n(a),o=r!==s,c=360/r,h="",u=1;"minutes"===t&&(u=i.options.minuteStep||5,h+="time-picker-minutes-"+u);var l=function(t,e){var n=c*t,i="";return e&&(n=-n,i="translate(-50%, -50%) "),i+="rotate("+n+"deg)","-webkit-transform:"+i+";transform:"+i+";"},f=i.parsedNow[t],p="",d="";return'<ul class="'+h+'">'+a.map(function(t,n){var i=t[0],a="";if(i===f){a=" picker-active";var s="rotate("+(c*n-90)+"deg)";p="-webkit-transform:"+s+";transform:"+s,o&&(!i||i>12)&&(d+=" time-picker-line-inner")}return u>1&&n%u!==0?"":(o&&(!i||i>12)&&(a+=" picker-cell-inner"),'<li class="picker-cell'+a+'" data-click="selV" data-val="'+i+'" style="'+l(n)+'">'+e(i,n,l)+"</li>")}).join("")+'</ul><div class="time-picker-line'+d+'" style="'+p+'"></div>'}}var s=n(1),r={D:a("hours",null,function(t){return t.length/2}),H:a("minutes",function(t,e,n){return e%5===0?'<i style="'+n(e,!0)+'">'+s.pad(t,2)+"</i>":"<b></b>"})};s.extend(i.prototype,{render:function(){this.main||this._init();var t="D"===this.type;this.picker.head.innerHTML='<div class="picker-hour'+(t?" picker-head-active":"")+'"'+(t?"":' data-click="toHours"')+">"+s.formatDate(this.picker.dateTime.now,"HH")+'</div>:<div class="picker-minute'+(t?"":" picker-head-active")+'"'+(t?' data-click="toMinutes"':"")+">"+s.formatDate(this.picker.dateTime.now,"mm")+"</div>",this.main.innerHTML=r[this.type](this.picker.dateTime,this.rows),this.afterRender()},afterRender:function(){this.headActiveEle=this.picker.head.querySelector(".picker-head-active"),this.activeEle=this.main.querySelector(".picker-active"),this.pickerLineEle=this.main.querySelector(".time-picker-line")},_init:function(){this.rows=this.picker.dateTime.getRows(),this._initMain()},_initMain:function(){this.main=s.createElement("div",{className:"time-picker-main "+("D"===this.type?"time-picker-main-hours":"time-picker-main-minutes")}),this.mainStyle=this.main.style,this.picker.content.appendChild(this.main)},show:function(){this.mainStyle.display="block"},hide:function(){this.mainStyle.display="none"},selfChange:function(){var t=this.picker.dateTime.getLevelValue();this.headActiveEle.innerHTML=s.pad(t,2);var e=this.main.querySelector('.picker-cell[data-val="'+t+'"]');this.activeEle&&this.activeEle.classList.remove("picker-active"),e.classList.add("picker-active"),this.activeEle=e;var n=+e.style[s.prefixNames.transform].match(/rotate\((-?\d+)deg\)/)[1];n-=90,this.pickerLineEle.style[s.prefixNames.transform]="rotate("+n+"deg)",this.pickerLineEle.classList[e.classList.contains("picker-cell-inner")?"add":"remove"]("time-picker-line-inner")},_start:function(t){var e=this,n=null,i=function(t){var i=document.elementFromPoint(t.pageX,t.pageY);(i&&i.classList.contains("picker-cell")||(i=i.parentElement)&&i.classList.contains("picker-cell"))&&(n=i,e.picker.changeTo(i.getAttribute("data-val"),!0))};i(t.touches[0]),this.__move=function(t){i(t.touches[0])},this.__end=function(t){this.__move=null,this.__end=null,n&&e.picker.selV({realTarget:n})}},destroy:function(){this.picker.content.removeChild(this.main),s.set2Null(["picker","main","mainStyle","headActiveEle","activeEle","pickerLineEle","__move","__end"],this)}}),t.exports=i},,function(t,e,n){function i(){a.apply(this,arguments)}var a=n(5),s=n(1),r=n(16);a.extend(i,{init:function(){this.needDefFormat&&(this.options.format="HH:mm");var t=this.options.minuteStep;t||(t=5),1!==t&&5!==t&&10!==t&&(t=5),s.extend(this.options,{type:"D",minuteStep:t}),this.panel=this.hoursPanel=new r(this)},initEle:function(){this.ele.classList.add("time-picker-container")},selV:function(t){var e=this;this["super"].selV.call(this,t),setTimeout(function(){e.toMinutes()})},_to:function(t,e){this.options.type!==t&&(s.extend(this.options,{type:t}),this.panel.hide(),this[e]?this[e].show():this[e]=new r(this),this.panel=this[e],this.setDateTime())},toHours:function(){this._to("D","hoursPanel")},toMinutes:function(){this._to("H","minutesPanel")}}),t.exports=i}])});